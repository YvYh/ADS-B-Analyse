<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <script type="text/javascript">
    </script>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <style type="text/css">
        html, body, .map {
            width: 100%;
            height: 100%;
            margin: 0px;
        }
    </style>
    <title>China Air Traffic Flow</title>
</head>
<body>
    <div id="container" class="map" tabindex="0"></div>
    <script language="javascript" src="https://webapi.amap.com/maps?v=1.4.10&key=&plugin=Map3D,AMap.DistrictLayer,AMap.Scale,AMap.ToolBar"></script>
    <script type="text/javascript">

    var SOC = 'CHN'
    var colors = {};
    var Province = {
        '520000':'GUIZHOU',//贵州
        '540000':'TIBET',//西藏
        '530000':'YUNNAN',//云南
        '500000':'CHONGQING',//重庆
        '360000':'JIANGXI',//江西
        '340000':'ANHUI',//安徽
        '510000':'SICHUAN',//四川
        '350000':'FUJIAN',//福建
        '430000':'HUNAN',//湖南
        '420000':'HUBEI', //湖北
        '410000':'HENAN',//河南
        '330000':'ZHEJIANG',//浙江
        '640000':'NINGXIA',//宁夏
        '650000':'XINJIANG',//新疆
        '440000':'GUANGDONG',//广东
        '370000':'SHANDONG',//山东
        '450000':'GUANGXI',//广西
        '630000':'QINGHAI',//青海
        '320000':'JIANGSU',//江苏
        '140000':'SHANXI',//山西
        '460000':'HAINAN',// 海南
        '310000':'SHANGHAI',//上海
        '110000':'BEIJING', // 北京
        '130000':'HEBEI', // 河北
        '230000':'HEILONGJIANG', // 黑龙江
        '220000':'JILIN',// 吉林
        '210000':'LIAONIG', //辽宁
        '150000':'NEIMENGGU',//内蒙古
        '120000':'TIANJIN',// 天津
        '620000': 'GANSU',// 甘肃
        '610000': 'GANSU'// 甘肃
    }

    var ATF = {
        'SHANDONG': 8,
        'FUJIAN': 70,
        'SHANXI': 64,
        'SHANGHAI': 200,
        'ZHEJIANG':550

    }

    var getColorByATF = function(adcode){
        if(!colors[adcode]){
            var flow = ATF[Province[adcode]];
            if(!flow){
                colors[adcode] = 'rgb(255,250,250)'
            }else{
                //var rg = 255-Math.floor(flow/20*255);
                var rg = 255 - (flow / 500 * 255);
                colors[adcode] = 'rgb(255,'+ rg +','+ rg +')';
            }
        }
        return colors[adcode]
    }

    var disCountry = new AMap.DistrictLayer.Country({
        zIndex:10,
        SOC:'CHN',
        depth:2,
        styles:{
            'nation-stroke':'#22ffff',
            'coastline-stroke':[0.8, 0.63, 0.94, 1],
            'province-stroke':'white',
            'city-stroke': 'rgba(255,255,255,0.5)',//中国特有字段
            'fill':function(props){//中国特有字段
               return getColorByATF(props.adcode_pro)
            }
        }
    })


    var map = new AMap.Map("container",{
            zooms: [3, 10],
            showIndoorMap:false,
            zoom: 3,
            isHotspot:false,
            defaultCursor:'pointer',
            touchZoomCenter:1,
            pitch: 0,
            layers:[
                disCountry,
                new AMap.TileLayer.Satellite()
            ],
            viewMode:'3D',
            resizeEnable: true
    })
    map.addControl(new AMap.Scale());
    map.addControl(new AMap.ToolBar({liteStyle:true}));
    </script>
</body>

</html>